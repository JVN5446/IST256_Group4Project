<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <meta charset="UTF-8">
  <meta name="application-name" content="Project #4">
  <meta name="viewport" content="width-device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="icon" type="image/x-icon" href="https://www.freeiconspng.com/uploads/number-4-icon-19.png">
  <title>Shopping Cart</title>
  <style>
    body {font-family: Arial, sans-serif; margin: 20px;}
    h1 {text-align: center;}
    #cart-items {border: 1px solid #ccc; padding: 10px;margin-bottom: 20px;}
    .cart-item {display: flex;align-items: center;justify-content: space-between;margin-bottom: 10px;}
    .cart-item img {width: 50px;height: 50px;object-fit: fill;margin-right: 10px;}
    #cart-total {text-align: right;}
    #checkout-btn {background-color: #4CAF50;color: white;padding: 10px 20px;border: none;cursor: pointer;}
    #checkout-btn:hover {background-color: #45a049;}
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-2 border">
      <img src="https://www.freeiconspng.com/uploads/number-4-icon-19.png" alt="4 logo" width="75" height="75">
    </div>
    <div class="col-sm-10 border">
      <h1>Project #4</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-2 border">
      <nav class="navbar navbar-light">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html" target="_self">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="shopping_cart.html" target="_self">Shopping Cart</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Products</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Login</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact Us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="sign_up.html" target="_self">Sign Up</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="product_management.html" target="_self">Product Management</a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-sm-8">
      <h3 class="text-center mt-4">4 Store Shopping Cart</h3>
      <div id="cart-items" class="mt-4">
        <!-- Cart items will be dynamically added here -->
      </div>
      <div id="cart-total" class="text-right mt-4">
        <h4>Total: $<span id="total-amount">0</span></h4>
        <button id="checkout-btn" class="btn btn-success">Checkout</button>
        <span id="productJSONS"></span>
      </div>
    </div>
    <div class="col-sm-2 border">
      <aside>
        <p>This spot is reserved for ads</p>
      </aside>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 border">
      <footer>
        <a href="https://www.johnstrinkets.com./terms_of_use">Terms of Use</a>
        <a href="https://www.johnstrinkets.com/cookie_and_privacy_policy">Cookie & Privacy Policy</a>
        <a href="https://www.johnstrinkets.com/copyright">Copyright</a>
      </footer>
    </div>
  </div>
</div>
<script>
  // Sample JSON product data
  const products = [
    {
      productId: "001",
      productName: "A Pink #4",
      productPrice: 400.99,
      image: "https://static.vecteezy.com/system/resources/previews/024/683/991/non_2x/pink-3d-number-4-free-png.png"
    },
    {
      productId: "002",
      productName: "A Red #4",
      productPrice: 20.99,
      image: "https://atlas-content-cdn.pixelsquid.com/stock-images/number-4-Vay92K1-600.jpg"
    },
    // Add more product objects as needed
  ];

  // Function to add a product to the cart
  function addToCart(product) {
    const cartItems = document.getElementById("cart-items");
    const cartItem = document.createElement("div");
    cartItem.classList.add("cart-item");

    const productId = document.createElement("span");
    productId.textContent = product.productId;

    const productName = document.createElement("span");
    productName.textContent = product.productName;

    const quantity = document.createElement("input");
    quantity.type = "number";
    quantity.id = "productQuantity";
    quantity.placeholder = "Enter quantity";

    const productPrice = document.createElement("span");
    productPrice.textContent = "$" + product.productPrice;

    const productTotal = document.createElement("span");
    const calculateTotal = () => {
      const qty = quantity.value ? parseInt(quantity.value) : 1; // Default to 1 if empty
      const total = qty * product.productPrice;
      productTotal.textContent = "$" + total.toFixed(2); // Display total with two decimal places
    };

    calculateTotal();

    // Update total whenever the quantity input changes
    quantity.addEventListener("input", () => {
      calculateTotal();
      updateTotal();
    });

    const itemImage = document.createElement("img");
    itemImage.src = product.image;

    const actions = document.createElement("button");
    actions.textContent = "Remove";
    actions.style.backgroundColor = "red";
    actions.style.color = "white";
    actions.style.border = "none";
    actions.style.borderRadius = "5px";
    actions.style.padding =  "5px 10px";
    actions.style.cursor = "pointer";

    // Add hover effect for a darker background
    actions.addEventListener("mouseenter", () => {
      actions.style.backgroundColor = "darkred";
    });

    actions.addEventListener("mouseleave", () => {
      actions.style.backgroundColor = "red";
    });

    actions.addEventListener("click", function(event) {
      removeItem(event);  // Remove the specific item
      updateTotal();      // Update the total after item removal
    });

    function removeItem(event) {
      const cartItem = event.target.closest(".cart-item"); // Find the closest "cart-item" div
      if (cartItem) {
        cartItem.remove();  // Remove this specific "cart-item" div
      }
      }

    cartItem.appendChild(productId);
    cartItem.appendChild(itemImage);
    cartItem.appendChild(productName);
    cartItem.appendChild(productPrice);
    cartItem.appendChild(quantity);
    cartItem.appendChild(productTotal);
    cartItem.appendChild(actions);

    cartItems.appendChild(cartItem);
  }

  // Function to calculate and update the total amount
  function updateTotal() {
    const cartItems = document.getElementsByClassName("cart-item");
    let total = 0;

    for (let i = 0; i < cartItems.length; i++) {
      const itemPrice = parseFloat(cartItems[i].querySelector("span:nth-last-child(2)").textContent.slice(1));
      total += itemPrice;
    }

    document.getElementById("total-amount").textContent = total.toFixed(2);
  }

  // Event listener for the checkout button
  document.getElementById("checkout-btn").addEventListener("click", function() {
    // Add your checkout logic here
    alert("Checkout button clicked!");
  });

  // Sample usage: Adding products to the cart
  addToCart(products[0]);
  addToCart(products[1]);

  // Sample usage: Updating the total amount
  updateTotal();
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</body>
</html>